#!groovy

// Required: https://plugins.jenkins.io/pipeline-utility-steps

pipeline {

  agent none

  stages {
    stage('BuildAndTest') {
      parallel {
        stage('x') {
          agent { label 'blender' }
          steps {
            sh 'env | sort'

            script {
              def nodes = nodesByLabel label:"blender"
              def nodesSorted = nodes.sort().toList()
              for (int i = 0; i < nodesSorted.size(); ++i) {
                echo "Nodes: ${nodesSorted[i]}"
              }
            }
          }
        }
      }
    }
  }
}

